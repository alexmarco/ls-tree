# Contributing to trxd

Thank you for your interest in contributing to **trxd**! This document will guide you through the contribution process and help you understand our workflow.

## üìã Table of Contents

- [Code of Conduct](#code-of-conduct)
- [How to Contribute](#how-to-contribute)
- [Environment Setup](#environment-setup)
- [Workflow](#workflow)
- [Code Standards](#code-standards)
- [Release Process](#release-process)
- [Reporting Issues](#reporting-issues)
- [Pull Requests](#pull-requests)
- [Additional Resources](#additional-resources)

## ü§ù Code of Conduct

This project follows a code of conduct to ensure a welcoming environment for everyone. By participating, you are expected to maintain respectful and constructive behavior.

## üöÄ How to Contribute

There are many ways to contribute to trxd:

- üêõ **Report bugs** and issues
- üí° **Suggest new features**
- üìù **Improve documentation**
- üîß **Contribute code**
- üß™ **Write or improve tests**
- üìä **Optimize performance**

## ‚öôÔ∏è Environment Setup

### Prerequisites

- **Python 3.8+**
- **Git**
- **uv** (dependency manager)

### Installation

```bash
# 1. Fork and clone the repository
git clone https://github.com/your-username/trxd.git
cd trxd

# 2. Install uv if you don't have it
pip install uv

# 3. Install dependencies
uv sync --all-extras

# 4. Verify installation
uv run python -m trxd --help
```

### Project Structure

```
trxd/
‚îú‚îÄ‚îÄ src/trxd/           # Main source code
‚îú‚îÄ‚îÄ tests/              # Unit and integration tests
‚îú‚îÄ‚îÄ scripts/            # Utility scripts
‚îú‚îÄ‚îÄ .github/workflows/  # GitHub Actions
‚îú‚îÄ‚îÄ docs/               # Documentation
‚îî‚îÄ‚îÄ pyproject.toml      # Project configuration
```

### Project Architecture

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#1e40af', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#1e3a8a', 'lineColor': '#64748b', 'secondaryColor': '#eff6ff', 'tertiaryColor': '#dbeafe', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#eff6ff', 'tertiaryBkg': '#dbeafe'}}}%%
graph TB
    subgraph "üéØ Entry Point"
        A[__main__.py] --> B[TreeApplication]
    end
    
    subgraph "üèóÔ∏è Core Components"
        B --> C[TreeBuilder]
        B --> D[FileTypeDetector]
        B --> E[MetadataCollector]
        C --> F[TreeGenerator]
    end
    
    subgraph "üé® Renderers"
        B --> G[Renderer Interface]
        G --> H[TreeRenderer]
        G --> I[FlatRenderer]
        G --> J[CSVRenderer]
        G --> K[JSONRenderer]
        G --> L[YAMLRenderer]
    end
    
    subgraph "üß™ Testing"
        M[test_main.py] --> B
        N[test_renderers.py] --> G
        O[test_integration.py] --> B
        P[test_utils.py] --> E
    end
    
    subgraph "‚öôÔ∏è Automation"
        Q[scripts/release.py] --> R[GitHub Actions]
        R --> S[Changelog Workflow]
        R --> T[Release Workflow]
        S --> U[git-cliff]
        T --> V[PyPI Upload]
    end
    
    style A fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
    style B fill:#dbeafe,stroke:#3b82f6,stroke-width:3px
    style G fill:#e0e7ff,stroke:#6366f1,stroke-width:2px
    style R fill:#f0fdf4,stroke:#22c55e,stroke-width:2px
```

## üîÑ Workflow

### General Development Flow

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#2563eb', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#1d4ed8', 'lineColor': '#64748b', 'secondaryColor': '#f1f5f9', 'tertiaryColor': '#e2e8f0', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#f1f5f9', 'tertiaryBkg': '#e2e8f8'}}}%%
graph TD
    A[üöÄ Fork Repository] --> B[üì• Clone Local]
    B --> C[üåø Create Feature Branch]
    C --> D[üíª Make Changes]
    D --> E[üß™ Run Tests]
    E --> F{‚úÖ Tests Pass?}
    F -->|‚ùå No| G[üîß Fix Issues]
    G --> E
    F -->|‚úÖ Yes| H[üìù Commit Changes]
    H --> I[üì§ Push Branch]
    I --> J[üîÑ Create Pull Request]
    J --> K[üëÄ Code Review]
    K --> L{‚úÖ Approved?}
    L -->|‚ùå No| M[üîß Address Feedback]
    M --> H
    L -->|‚úÖ Yes| N[üéâ Merge to Main]
    N --> O[üè∑Ô∏è Automatic Release]
```

### Automated Release Flow

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#059669', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#047857', 'lineColor': '#64748b', 'secondaryColor': '#f0fdf4', 'tertiaryColor': '#dcfce7', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#f0fdf4', 'tertiaryBkg': '#dcfce7'}}}%%
graph TD
    A[üéØ Ready for Release] --> B[üìú Run Release Script]
    B --> C[üî¢ Update Version]
    C --> D[üè∑Ô∏è Create Git Tag]
    D --> E[üì§ Push to GitHub]
    E --> F[‚ö° Trigger GitHub Actions]
    F --> G[üìù Generate Changelog]
    G --> H[üì¶ Build Package]
    H --> I[üöÄ Create GitHub Release]
    I --> J[üìö Publish to PyPI]
    J --> K[‚úÖ Release Complete]
    
    style A fill:#dbeafe,stroke:#3b82f6,stroke-width:2px
    style K fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    style F fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
```

### Branch Conventions

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#7c3aed', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#6d28d9', 'lineColor': '#64748b', 'secondaryColor': '#faf5ff', 'tertiaryColor': '#f3e8ff', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#faf5ff', 'tertiaryBkg': '#f3e8ff'}}}%%
graph LR
    A[main] --> B[feat/feature-name]
    A --> C[fix/bug-description]
    A --> D[chore/improvement]
    A --> E[docs/documentation]
    A --> F[test/test-coverage]
    
    B --> G[Pull Request]
    C --> G
    D --> G
    E --> G
    F --> G
    
    G --> A
    
    style A fill:#dcfce7,stroke:#16a34a,stroke-width:3px
    style B fill:#dbeafe,stroke:#3b82f6,stroke-width:2px
    style C fill:#fecaca,stroke:#dc2626,stroke-width:2px
    style D fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
    style E fill:#e0e7ff,stroke:#6366f1,stroke-width:2px
    style F fill:#f0fdf4,stroke:#22c55e,stroke-width:2px
```

## üìè Code Standards

### Commit Conventions

We follow **Conventional Commits** to maintain a clear history:

```bash
# Estructura: <type>(<scope>): <description>

# Ejemplos:
feat(auth): add email and password login
fix(api): resolve 500 error when fetching users
docs: update README with installation instructions
chore: bump version to 25.10.4
refactor(utils): improve error handling
test: add unit tests for authentication
```

### Commit Types

| Type | Description | Emoji |
|------|-------------|-------|
| `feat` | Nueva funcionalidad | üöÄ |
| `fix` | Correcci√≥n de bugs | üêõ |
| `docs` | Documentaci√≥n | üìö |
| `style` | Formato, espacios, etc. | üé® |
| `refactor` | Refactorizaci√≥n de c√≥digo | üöú |
| `test` | Tests | üß™ |
| `chore` | Tareas de mantenimiento | üîß |
| `perf` | Mejoras de rendimiento | ‚ö° |
| `ci` | Cambios en CI/CD | ‚öôÔ∏è |
| `build` | Cambios en build system | üî® |

### Quality Tools

Before committing, run:

```bash
# Format code
uv run ruff format .

# Check linting
uv run ruff check --fix .

# Check types
uv run mypy .

# Run tests
uv run pytest
```

### Test Structure

```python
# tests/test_feature.py
import pytest
from trxd import feature_function

class TestFeature:
    def test_basic_functionality(self):
        """Test basic functionality works correctly."""
        result = feature_function("input")
        assert result == "expected_output"
    
    def test_edge_cases(self):
        """Test edge cases and error conditions."""
        with pytest.raises(ValueError):
            feature_function("")
```

## ‚öôÔ∏è CI/CD Flow

### Continuous Integration Pipeline

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#7c2d12', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#92400e', 'lineColor': '#64748b', 'secondaryColor': '#fef7ed', 'tertiaryColor': '#fed7aa', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#fef7ed', 'tertiaryBkg': '#fed7aa'}}}%%
graph LR
    A[üì§ Push/PR] --> B[ü§ñ GitHub Actions]
    B --> C[üêç Setup Python]
    C --> D[üì¶ Install Dependencies]
    D --> E[üé® Format Check]
    E --> F[üîç Lint Check]
    F --> G[üè∑Ô∏è Type Check]
    G --> H[üß™ Run Tests]
    H --> I{‚úÖ All Pass?}
    I -->|‚ùå No| J[‚ùå Fail CI]
    I -->|‚úÖ Yes| K[‚úÖ Pass CI]
    
    subgraph "üîÑ Release Pipeline"
        L[üè∑Ô∏è Tag Created] --> M[üìù Generate Changelog]
        M --> N[üì¶ Build Package]
        N --> O[üöÄ Create Release]
        O --> P[üìö Publish to PyPI]
    end
    
    style A fill:#dbeafe,stroke:#3b82f6,stroke-width:2px
    style K fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    style J fill:#fecaca,stroke:#dc2626,stroke-width:2px
    style L fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
    style P fill:#dcfce7,stroke:#16a34a,stroke-width:2px
```

### Available Workflows

| Workflow | Trigger | Purpose |
|----------|---------|-----------|
| **CI** | Push/PR | Verify code quality |
| **Changelog** | Tag | Generate changelog automatically |
| **Release** | Tag | Create release and publish to PyPI |

## üè∑Ô∏è Release Process

### Automated Release

Our release process is completely automated:

```bash
# Create new release (automatic increment)
python scripts/release.py

# Create release with specific version
python scripts/release.py 25.10.13

# See what would happen without executing
python scripts/release.py --dry-run
```

### What happens automatically?

1. **Version update** in `pyproject.toml`
2. **Tag creation** and push to GitHub
3. **Automatic changelog generation** with `git-cliff`
4. **GitHub release creation** with changelog
5. **Automatic PyPI publication**

### Versioning

We use **Calendar Versioning (CalVer)**:

- **Format**: `YY.MM.MICRO`
- **Example**: `25.10.5` (October 2025, release #5)
- **Advantages**: Easy to understand version age

## üêõ Reporting Issues

### Before Reporting

1. **Search existing issues** to avoid duplicates
2. **Check the latest version**
3. **Review the documentation**

### Bug Report Template

```markdown
## üêõ Descripci√≥n del Bug
Descripci√≥n clara y concisa del problema.

## üîÑ Pasos para Reproducir
1. Ve a '...'
2. Haz clic en '...'
3. Despl√°zate hasta '...'
4. Ve el error

## ‚úÖ Comportamiento Esperado
Descripci√≥n de lo que esperabas que pasara.

## üì∏ Capturas de Pantalla
Si aplica, a√±ade capturas de pantalla.

## üñ•Ô∏è Informaci√≥n del Sistema
- OS: [e.g. Windows 10, macOS 12.0, Ubuntu 20.04]
- Python: [e.g. 3.9.7]
- trxd: [e.g. 25.10.5]

## üìù Informaci√≥n Adicional
Cualquier otra informaci√≥n relevante.
```

## üîÑ Pull Requests

### Before Creating a PR

1. **Sync your branch** with `main`
2. **Run all tests** and verify they pass
3. **Update documentation** if necessary
4. **Follow commit conventions**

### Pull Request Template

```markdown
## üìù Descripci√≥n
Descripci√≥n clara de los cambios realizados.

## üîó Issues Relacionados
Closes #123
Fixes #456

## üß™ Testing
- [ ] Tests unitarios a√±adidos/actualizados
- [ ] Tests de integraci√≥n pasan
- [ ] Verificado manualmente

## üìö Documentaci√≥n
- [ ] README actualizado si es necesario
- [ ] Docstrings a√±adidos/actualizados
- [ ] Comentarios en c√≥digo si es necesario

## ‚úÖ Checklist
- [ ] C√≥digo sigue las convenciones del proyecto
- [ ] Self-review del c√≥digo realizado
- [ ] Tests pasan localmente
- [ ] Documentaci√≥n actualizada
```

### Review Process

```mermaid
%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#dc2626', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#b91c1c', 'lineColor': '#64748b', 'secondaryColor': '#fef2f2', 'tertiaryColor': '#fee2e2', 'background': '#ffffff', 'mainBkg': '#f8fafc', 'secondBkg': '#fef2f2', 'tertiaryBkg': '#fee2e2'}}}%%
graph TD
    A[üì§ PR Creado] --> B[ü§ñ CI/CD Checks]
    B --> C{‚úÖ Checks Pass?}
    C -->|‚ùå No| D[üîß Fix Issues]
    D --> B
    C -->|‚úÖ Yes| E[üëÄ Code Review]
    E --> F{‚úÖ Approved?}
    F -->|‚ùå No| G[üí¨ Address Feedback]
    G --> E
    F -->|‚úÖ Yes| H[üéâ Merge PR]
    H --> I[üè∑Ô∏è Auto Release]
    
    style A fill:#dbeafe,stroke:#3b82f6,stroke-width:2px
    style H fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    style I fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
```

## üìö Additional Resources

### Documentation

- [README.md](README.md) - Informaci√≥n general del proyecto
- [CHANGELOG.md](CHANGELOG.md) - Historial de cambios
- [pyproject.toml](pyproject.toml) - Configuraci√≥n del proyecto

### Tools

- [uv](https://github.com/astral-sh/uv) - Gestor de dependencias
- [ruff](https://github.com/astral-sh/ruff) - Linter y formateador
- [mypy](https://mypy.readthedocs.io/) - Verificador de tipos
- [pytest](https://pytest.org/) - Framework de testing
- [git-cliff](https://git-cliff.org/) - Generador de changelogs

### Useful Links

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Keep a Changelog](https://keepachangelog.com/)
- [Semantic Versioning](https://semver.org/)
- [Calendar Versioning](https://calver.org/)

## üí¨ Communication

- **Issues**: For bugs and feature requests
- **Discussions**: For general questions and ideas
- **Pull Requests**: For code contributions

## üí° Contribution Examples

### Example 1: Adding a New Renderer

```python
# 1. Create the new renderer
class XMLRenderer(Renderer):
    def render(self, tree_generator: TreeGenerator) -> None:
        print('<?xml version="1.0" encoding="UTF-8"?>')
        print('<tree>')
        for item in tree_generator:
            print(f'  <item type="{item.type}" name="{item.name}"/>')
        print('</tree>')

# 2. Add tests
def test_xml_renderer():
    renderer = XMLRenderer()
    # ... tests aqu√≠

# 3. Update TreeApplication to include the new format
```

### Example 2: Improving Filtering

```python
# 1. Add new filtering functionality
class TreeBuilder:
    def __init__(self, args: argparse.Namespace):
        self.args = args
        self.size_filter = self._parse_size_filter(args.size_filter)
    
    def _parse_size_filter(self, size_str: str) -> Optional[tuple]:
        # Implementar filtrado por tama√±o
        pass

# 2. Add CLI argument
parser.add_argument('--size-filter', help='Filter by file size (e.g., >1MB)')

# 3. Add tests
def test_size_filtering():
    # ... tests aqu√≠
```

### Example 3: Performance Optimization

```python
# 1. Identify bottleneck
# 2. Implement optimization
class OptimizedTreeBuilder:
    def build_tree(self, directory: Path) -> TreeGenerator:
        # Usar generadores para memoria eficiente
        # Implementar cach√© para metadatos
        pass

# 3. Add benchmarks
def benchmark_tree_building():
    # Medir rendimiento antes/despu√©s
    pass
```

## üéØ Contribution Roadmap

### üü¢ Easy (Good First Issues)

- [ ] Add more output formats (XML, HTML)
- [ ] Improve error messages
- [ ] Add more integration tests
- [ ] Document advanced use cases

### üü° Intermediate

- [ ] Implement advanced filters (date, permissions)
- [ ] Add support for compressed files
- [ ] Optimize performance for large directories
- [ ] Add interactive mode

### üî¥ Advanced

- [ ] Implement parallelization
- [ ] Add database support
- [ ] Create plugin system
- [ ] Implement streaming for large files

## üèÜ Recognition

### Recognized Contribution Types

- üêõ **Bug Reports**: Help improve stability
- üí° **Feature Requests**: Guide future development
- üìù **Documentation**: Make the project more accessible
- üîß **Code Contributions**: Improve functionality
- üß™ **Testing**: Ensure quality
- üé® **UI/UX**: Improve user experience

### Outstanding Contributors

Outstanding contributors will appear in:

- README.md as contributors
- CHANGELOG.md in important releases
- GitHub contributors page

## üôè Acknowledgments

Thank you for contributing to trxd! Every contribution, no matter how small, makes the project better for everyone.

### How We Acknowledge Contributions

- ‚úÖ **Public recognition** in releases
- ‚úÖ **Mentions** in documentation
- ‚úÖ **Access** to private discussions
- ‚úÖ **Invitation** to collaborate on decisions

---

**Have questions?** Feel free to open an issue or discussion. We're here to help! üöÄ

**Ready to contribute?** Start with an issue or fork the repository! üéâ
